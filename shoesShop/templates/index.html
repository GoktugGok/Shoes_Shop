{% extends 'partials/main.html' %}

{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/index.css' %}">

<!-- Best Sellers section -->
<section class="best-sellers-section">
    <div class="container">
        <div class="d-flex justify-content-between align-items-end mb-4">
            <div>
                <h6 class="text-uppercase tracking-widest text-muted mb-2 fw-bold" style="font-size: 0.75rem;">Premium
                    Collection</h6>
                <h1 class="fw-bold text-dark mb-0" style="font-size: 2.8rem; letter-spacing: -1.5px;">Best Sellers</h1>
            </div>
            <div class="d-flex gap-2">
                <button class="carousel-nav-btn" onclick="scrollSlider('left', 'bestSellersSlider')">
                    <i class="bi bi-chevron-left"></i>
                </button>
                <button class="carousel-nav-btn" onclick="scrollSlider('right', 'bestSellersSlider')">
                    <i class="bi bi-chevron-right"></i>
                </button>
            </div>
        </div>

        <div class="slider-row" id="bestSellersSlider">
            {% for shoe in top_shoes %}
            <div class="slider-item">
                <a href="{% url 'product' shoe.id %}" class="text-decoration-none h-100 d-block">
                    <div class="card best-seller-card">
                        <div class="card-top-bg"
                            style="background-color: {% cycle '#7c9c82' '#9c8c7c' '#b2b5ba' '#5c705c' %};">
                            <div class="bg-text-overlay">
                                {% if shoe.product_Brand.name and shoe.product_Brand.name != "None" %}
                                {{ shoe.product_Brand.name }}
                                {% else %}
                                STYLE
                                {% endif %}
                            </div>
                            <img src="{{ shoe.image.url }}" class="shoe-floating-img" alt="">
                        </div>
                        <div class="card-bottom-info">
                            <span class="brand-label">
                                {% if shoe.product_Brand.name and shoe.product_Brand.name != "None" %}
                                {{ shoe.product_Brand.name }}
                                {% else %}
                                &nbsp;
                                {% endif %}
                            </span>
                            <h6 class="slider-product-name text-dark mb-3">{{ shoe.name }}</h6>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="price-tag">${{ shoe.price }}</span>
                                <div class="plus-add-btn">
                                    <i class="bi bi-plus"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Categories section -->
<section class="py-5 bg-white">
    <div class="container py-4">
        <div class="row g-4 justify-content-center">
            <div class="col-lg-4 col-md-6">
                <a href="/shoes/categories/erkek" class="category-card d-block">
                    <img src="media/images/erkek.jpg" alt="Erkek">
                    <div class="category-overlay">
                        <h3 class="text-white fw-bold mb-3">ERKEK</h3>
                        <div class="btn-premium">Shop Now</div>
                    </div>
                </a>
            </div>
            <div class="col-lg-4 col-md-6">
                <a href="/shoes/categories/kadin" class="category-card d-block">
                    <img src="media/images/kadin.jpg" alt="Kadın">
                    <div class="category-overlay">
                        <h3 class="text-white fw-bold mb-3">KADIN</h3>
                        <div class="btn-premium">Shop Now</div>
                    </div>
                </a>
            </div>
            <div class="col-lg-4 col-md-6">
                <a href="/shoes/categories/cocuk" class="category-card d-block">
                    <img src="media/images/cocuk.jpg" alt="Çocuk">
                    <div class="category-overlay">
                        <h3 class="text-white fw-bold mb-3">ÇOCUK</h3>
                        <div class="btn-premium">Shop Now</div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Review section -->
<div class="premium-reviews-section">
    <div class="container">
        <div class="row mb-5 text-center">
            <div class="col-12">
                <h6 class="text-uppercase tracking-widest text-muted mb-2 fw-bold" style="font-size: 0.75rem;">
                    Testimonials</h6>
                <h1 class="fw-bold text-dark mb-4" style="font-size: 2.8rem; letter-spacing: -1.5px;">Trusted by
                    {{ total_reviews|default:"100" }}+ Collectors</h1>
                <div class="d-flex justify-content-center gap-4 text-dark fw-semibold" style="font-size: 0.9rem;">
                    <span><i class="bi bi-patch-check-fill text-teal me-2"></i>Verified Purchases</span>
                    <span><i class="bi bi-star-fill text-warning me-2"></i>{{ average_rating|default:"5.0" }}/5 Average
                        Rating</span>
                </div>
            </div>
        </div>

        <div class="reviews-slider-container">
            <button class="carousel-nav-btn position-absolute start-0 top-50 translate-middle-y d-none d-md-flex"
                style="z-index: 10;" onclick="scrollSlider('left', 'reviewsSlider')">
                <i class="bi bi-chevron-left"></i>
            </button>
            <button class="carousel-nav-btn position-absolute end-0 top-50 translate-middle-y d-none d-md-flex"
                style="z-index: 10;" onclick="scrollSlider('right', 'reviewsSlider')">
                <i class="bi bi-chevron-right"></i>
            </button>

            <div class="reviews-slider" id="reviewsSlider">
                {% for comment in comments %}
                <div class="review-item">
                    <div class="review-card-premium h-100">
                        <div class="quote-mark">"</div>
                        <div class="review-stars">
                            {% with ''|center:comment.rate as range %}
                            {% for _ in range %}
                            <i class="bi bi-star-fill text-warning"></i>
                            {% endfor %}
                            {% endwith %}
                        </div>
                        <p class="review-content">{{ comment.comment }}</p>
                        <div class="reviewer-info">
                            {% if comment.user.userprofile.image %}
                            <img src="{{ comment.user.userprofile.image.url }}" class="reviewer-img"
                                alt="{{ comment.user.username }}">
                            {% else %}
                            <div
                                class="reviewer-img bg-teal d-flex align-items-center justify-content-center text-white fw-bold">
                                {{ comment.user.username|first|upper }}
                            </div>
                            {% endif %}
                            <div>
                                <div class="reviewer-name">{{ comment.user.username }}</div>
                                <div class="reviewer-title">{{ comment.subject|default:"Verified Shopper" }}</div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

{% endblock %}