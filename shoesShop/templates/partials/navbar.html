{% load static %}
<style>
   /* Two-Tier Premium Navbar Design */
   :root {
      --nav-bg: rgba(255, 255, 255, 0.98);
      --nav-blur: 15px;
      --nav-accent: #0d9488;
      --nav-text: #0f172a;
      --nav-border: rgba(0, 0, 0, 0.06);
   }

   .premium-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1100;
      background: var(--nav-bg);
      backdrop-filter: blur(var(--nav-blur));
      -webkit-backdrop-filter: blur(var(--nav-blur));
      border-bottom: 1px solid var(--nav-border);
      transition: all 0.3s ease;
   }

   /* Row 1: Logo | Search | Actions */
   .nav-top-row {
      max-width: 1440px;
      margin: 0 auto;
      padding: 12px 30px;
      display: flex;
      align-items: center;
      gap: 30px;
      /* Reduced gap to allow search more space */
   }

   .nav-brand-luxury {
      font-size: 1.4rem;
      font-weight: 950;
      color: var(--nav-text);
      text-decoration: none !important;
      letter-spacing: -1.2px;
      display: flex;
      align-items: center;
      gap: 6px;
      flex-shrink: 0;
   }

   .nav-brand-luxury span {
      background: linear-gradient(135deg, #0f172a 0%, #0d9488 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
   }

   .search-wrapper {
      flex-grow: 1;
      max-width: 900px;
      /* Lengthened from 700px */
      position: relative;
   }

   .search-pill {
      background: #f3f4f6;
      border: 1px solid transparent;
      border-radius: 12px;
      padding: 10px 18px;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
   }

   .search-pill:focus-within {
      background: white;
      border-color: var(--nav-accent);
      box-shadow: 0 4px 15px rgba(13, 148, 136, 0.1);
   }

   .search-pill input {
      background: transparent;
      border: none;
      width: 100%;
      padding-left: 12px;
      font-size: 0.95rem;
      font-weight: 500;
      outline: none;
      color: var(--nav-text);
   }

   .search-pill i {
      color: #94a3b8;
   }

   .nav-actions {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-shrink: 0;
   }

   /* Row 2: Centered Categories */
   .nav-bottom-row {
      border-top: 1px solid rgba(0, 0, 0, 0.03);
      padding: 10px 0;
   }

   .nav-categories-centered {
      display: flex;
      justify-content: center;
      gap: 40px;
      list-style: none;
      margin: 0;
      padding: 0;
   }

   .nav-cat-link {
      font-size: 0.8rem;
      font-weight: 700;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      text-decoration: none !important;
      transition: all 0.3s ease;
      position: relative;
      padding: 5px 0;
   }

   .nav-cat-link:hover {
      color: var(--nav-accent);
   }

   .nav-cat-link::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 50%;
      width: 0;
      height: 2px;
      background: var(--nav-accent);
      transition: all 0.3s ease;
      transform: translateX(-50%);
   }

   .nav-cat-link:hover::after {
      width: 100%;
   }

   .action-icon-btn {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      background: transparent;
      color: var(--nav-text);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      text-decoration: none !important;
      position: relative;
   }

   .action-icon-btn:hover {
      background: var(--nav-accent);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(13, 148, 136, 0.3);
   }

   .btn-signin {
      background: var(--nav-text);
      color: white !important;
      padding: 8px 20px;
      border-radius: 12px;
      font-weight: 700;
      font-size: 0.85rem;
      transition: all 0.2s ease;
      text-decoration: none !important;
   }

   @media (max-width: 991px) {
      .nav-top-row {
         padding: 10px 15px;
         gap: 5px;
         display: grid;
         grid-template-columns: 1fr auto;
         align-items: center;
      }

      .nav-brand-luxury {
         font-size: 1.2rem;
         grid-column: 1;
      }

      .nav-actions {
         grid-column: 2;
         gap: 2px;
      }

      .search-wrapper {
         display: block;
         grid-column: 1 / span 2;
         margin-top: 10px;
         width: 100%;
      }

      .nav-bottom-row {
         display: block;
         padding: 8px 0;
         overflow-x: auto;
         white-space: nowrap;
         -webkit-overflow-scrolling: touch;
         scrollbar-width: none;
         border-top: 1px solid rgba(0, 0, 0, 0.05);
      }

      .nav-bottom-row::-webkit-scrollbar {
         display: none;
      }

      .nav-categories-centered {
         justify-content: flex-start;
         padding: 0 15px;
         gap: 15px;
      }

      .nav-cat-link {
         font-size: 0.7rem;
         letter-spacing: 1px;
      }

      .action-icon-btn {
         width: 38px;
         height: 38px;
         font-size: 1.15rem;
      }

      .btn-signin {
         padding: 6px 14px;
         font-size: 0.8rem;
         border-radius: 10px;
      }
   }

   /* Body padding adjustments */
   body {
      padding-top: 130px !important;
   }

   @media (max-width: 991px) {
      body {
         padding-top: 145px !important;
         /* Extra space for wrapped mobile search */
      }
   }
</style>

<header class="premium-header">
   <!-- Row 1: Brand & Actions (Wraps on Mobile to Row 2: Search) -->
   <div class="nav-top-row">
      <a href="{% url 'index' %}" class="nav-brand-luxury">
         <i class="bi bi-lightning-charge-fill" style="color: var(--nav-accent);"></i>
         <span>SHOES HOUSE</span>
      </a>

      <!-- Search Wrapper (Full-width on Mobile) -->
      <div class="search-wrapper">
         <form id="searchId" onsubmit="return false">
            {% csrf_token %}
            <div class="search-pill">
               <i class="bi bi-search"></i>
               <input autocomplete="off" name="q" id="searchInput" type="search" placeholder="Search collections..."
                  oninput="getSearchResults()">
            </div>
         </form>
         <ul id="searchResults"
            class="rounded-4 p-0 position-absolute top-100 start-0 bg-white z-3 border SearchResults mt-2 w-100 visually-hidden-focusable shadow-lg">
         </ul>
      </div>

      <!-- Actions -->
      <div class="nav-actions">
         <a href="{% url 'myorder' %}" class="action-icon-btn" title="Orders">
            <i class="bi bi-clock-history"></i>
         </a>
         <a href="{% url 'cart' user.id|default_if_none:'0' %}" class="action-icon-btn" title="Bag">
            <i class="bi bi-handbag"></i>
         </a>

         {% if request.user.is_authenticated %}
         <div class="dropdown">
            <a href="#" class="action-icon-btn" data-bs-toggle="dropdown">
               <i class="bi bi-person"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end border-0 shadow-lg p-2 mt-2" style="border-radius: 18px;">
               <li class="px-3 py-2 border-bottom mb-2">
                  <small class="text-muted d-block" style="font-size: 0.65rem;">ACCOUNT</small>
                  <span class="fw-bold" style="font-size: 0.9rem;">{{ request.user.username }}</span>
               </li>
               <li><a class="dropdown-item rounded-3" href="{% url 'user_update' %}" style="font-size: 0.85rem;">Profile
                     Settings</a></li>
               <li>
                  <hr class="dropdown-divider">
               </li>
               <li><a class="dropdown-item rounded-3 text-danger" href="{% url 'logout' %}"
                     style="font-size: 0.85rem;">Logout</a></li>
            </ul>
         </div>
         {% else %}
         <a href="{% url 'login' %}" class="btn-signin">Sign In</a>
         {% endif %}
      </div>
   </div>

   <!-- Bottom Bar (Categories - Scrollable on Mobile) -->
   <div class="nav-bottom-row">
      <div class="nav-categories-centered">
         {% for all_category in all_categories %}
         <a href="{% url 'gallery_by_category' all_category.slug %}" class="nav-cat-link">{{all_category.title}}</a>
         {% endfor %}
      </div>
   </div>
</header>